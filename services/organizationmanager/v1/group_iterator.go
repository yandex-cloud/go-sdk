// Code generated by sdkgen-v2. DO NOT EDIT.
package organizationmanagersdk

import (
	"context"

	access "github.com/yandex-cloud/go-genproto/yandex/cloud/access"
	operation "github.com/yandex-cloud/go-genproto/yandex/cloud/operation"
	organizationmanager "github.com/yandex-cloud/go-genproto/yandex/cloud/organizationmanager/v1"
	"github.com/yandex-cloud/go-sdk/v2/pkg/iterator"
	"google.golang.org/grpc"
)

type GroupClientIterator interface {
	Iterator(context.Context, *organizationmanager.ListGroupsRequest, ...grpc.CallOption) *iterator.Iterator[*organizationmanager.ListGroupsRequest, *organizationmanager.Group]
	ExternalIterator(context.Context, *organizationmanager.ListExternalGroupsRequest, ...grpc.CallOption) *iterator.Iterator[*organizationmanager.ListExternalGroupsRequest, *organizationmanager.Group]
	OperationsIterator(context.Context, *organizationmanager.ListGroupOperationsRequest, ...grpc.CallOption) *iterator.Iterator[*organizationmanager.ListGroupOperationsRequest, *operation.Operation]
	MembersIterator(context.Context, *organizationmanager.ListGroupMembersRequest, ...grpc.CallOption) *iterator.Iterator[*organizationmanager.ListGroupMembersRequest, *organizationmanager.GroupMember]
	AccessBindingsIterator(context.Context, *access.ListAccessBindingsRequest, ...grpc.CallOption) *iterator.Iterator[*access.ListAccessBindingsRequest, *access.AccessBinding]
	EffectiveIterator(context.Context, *organizationmanager.ListEffectiveRequest, ...grpc.CallOption) *iterator.Iterator[*organizationmanager.ListEffectiveRequest, *organizationmanager.GroupMembershipInfo]
}

type groupServiceListInternal struct {
	*organizationmanager.ListGroupsResponse
}

func (r groupServiceListInternal) Items() []*organizationmanager.Group {
	return r.ListGroupsResponse.Groups
}

func (c groupClient) Iterator(ctx context.Context, req *organizationmanager.ListGroupsRequest, opts ...grpc.CallOption) *iterator.Iterator[*organizationmanager.ListGroupsRequest, *organizationmanager.Group] {
	return iterator.NewIterator[*organizationmanager.ListGroupsRequest, *organizationmanager.Group](ctx, req,
		func(ctx context.Context, req *organizationmanager.ListGroupsRequest, opts ...grpc.CallOption) (iterator.PageResponse[*organizationmanager.Group], error) {
			resp, err := c.List(ctx, req, opts...)
			if err != nil {
				return nil, err
			}
			return groupServiceListInternal{resp}, nil
		})
}

type groupServiceListExternalInternal struct {
	*organizationmanager.ListExternalGroupsResponse
}

func (r groupServiceListExternalInternal) Items() []*organizationmanager.Group {
	return r.ListExternalGroupsResponse.Groups
}

func (c groupClient) ExternalIterator(ctx context.Context, req *organizationmanager.ListExternalGroupsRequest, opts ...grpc.CallOption) *iterator.Iterator[*organizationmanager.ListExternalGroupsRequest, *organizationmanager.Group] {
	return iterator.NewIterator[*organizationmanager.ListExternalGroupsRequest, *organizationmanager.Group](ctx, req,
		func(ctx context.Context, req *organizationmanager.ListExternalGroupsRequest, opts ...grpc.CallOption) (iterator.PageResponse[*organizationmanager.Group], error) {
			resp, err := c.ListExternal(ctx, req, opts...)
			if err != nil {
				return nil, err
			}
			return groupServiceListExternalInternal{resp}, nil
		})
}

type groupServiceListOperationsInternal struct {
	*organizationmanager.ListGroupOperationsResponse
}

func (r groupServiceListOperationsInternal) Items() []*operation.Operation {
	return r.ListGroupOperationsResponse.Operations
}

func (c groupClient) OperationsIterator(ctx context.Context, req *organizationmanager.ListGroupOperationsRequest, opts ...grpc.CallOption) *iterator.Iterator[*organizationmanager.ListGroupOperationsRequest, *operation.Operation] {
	return iterator.NewIterator[*organizationmanager.ListGroupOperationsRequest, *operation.Operation](ctx, req,
		func(ctx context.Context, req *organizationmanager.ListGroupOperationsRequest, opts ...grpc.CallOption) (iterator.PageResponse[*operation.Operation], error) {
			resp, err := c.ListOperations(ctx, req, opts...)
			if err != nil {
				return nil, err
			}
			return groupServiceListOperationsInternal{resp}, nil
		})
}

type groupServiceListMembersInternal struct {
	*organizationmanager.ListGroupMembersResponse
}

func (r groupServiceListMembersInternal) Items() []*organizationmanager.GroupMember {
	return r.ListGroupMembersResponse.Members
}

func (c groupClient) MembersIterator(ctx context.Context, req *organizationmanager.ListGroupMembersRequest, opts ...grpc.CallOption) *iterator.Iterator[*organizationmanager.ListGroupMembersRequest, *organizationmanager.GroupMember] {
	return iterator.NewIterator[*organizationmanager.ListGroupMembersRequest, *organizationmanager.GroupMember](ctx, req,
		func(ctx context.Context, req *organizationmanager.ListGroupMembersRequest, opts ...grpc.CallOption) (iterator.PageResponse[*organizationmanager.GroupMember], error) {
			resp, err := c.ListMembers(ctx, req, opts...)
			if err != nil {
				return nil, err
			}
			return groupServiceListMembersInternal{resp}, nil
		})
}

type groupServiceListAccessBindingsInternal struct {
	*access.ListAccessBindingsResponse
}

func (r groupServiceListAccessBindingsInternal) Items() []*access.AccessBinding {
	return r.ListAccessBindingsResponse.AccessBindings
}

func (c groupClient) AccessBindingsIterator(ctx context.Context, req *access.ListAccessBindingsRequest, opts ...grpc.CallOption) *iterator.Iterator[*access.ListAccessBindingsRequest, *access.AccessBinding] {
	return iterator.NewIterator[*access.ListAccessBindingsRequest, *access.AccessBinding](ctx, req,
		func(ctx context.Context, req *access.ListAccessBindingsRequest, opts ...grpc.CallOption) (iterator.PageResponse[*access.AccessBinding], error) {
			resp, err := c.ListAccessBindings(ctx, req, opts...)
			if err != nil {
				return nil, err
			}
			return groupServiceListAccessBindingsInternal{resp}, nil
		})
}

type groupServiceListEffectiveInternal struct {
	*organizationmanager.ListEffectiveResponse
}

func (r groupServiceListEffectiveInternal) Items() []*organizationmanager.GroupMembershipInfo {
	return r.ListEffectiveResponse.GroupMembershipInfo
}

func (c groupClient) EffectiveIterator(ctx context.Context, req *organizationmanager.ListEffectiveRequest, opts ...grpc.CallOption) *iterator.Iterator[*organizationmanager.ListEffectiveRequest, *organizationmanager.GroupMembershipInfo] {
	return iterator.NewIterator[*organizationmanager.ListEffectiveRequest, *organizationmanager.GroupMembershipInfo](ctx, req,
		func(ctx context.Context, req *organizationmanager.ListEffectiveRequest, opts ...grpc.CallOption) (iterator.PageResponse[*organizationmanager.GroupMembershipInfo], error) {
			resp, err := c.ListEffective(ctx, req, opts...)
			if err != nil {
				return nil, err
			}
			return groupServiceListEffectiveInternal{resp}, nil
		})
}
