// Code generated by sdkgen-v2. DO NOT EDIT.
package idpsdk

import (
	"context"

	operation "github.com/yandex-cloud/go-genproto/yandex/cloud/operation"
	idp "github.com/yandex-cloud/go-genproto/yandex/cloud/organizationmanager/v1/idp"
	sdkop "github.com/yandex-cloud/go-sdk/v2/pkg/operation"
	"github.com/yandex-cloud/go-sdk/v2/pkg/transport"
	"google.golang.org/grpc"
	"google.golang.org/protobuf/reflect/protoreflect"
	emptypb "google.golang.org/protobuf/types/known/emptypb"
)

// SynchronizationSessionClient provides methods for managing SynchronizationSession resources of Yandex.Cloud Idp.
type SynchronizationSessionClient interface {
	SynchronizationSessionClientIterator
	OpenSession(context.Context, *idp.OpenSessionRequest, ...grpc.CallOption) (*SynchronizationSessionOpenSessionOperation, error)
	CloseSession(context.Context, *idp.CloseSessionRequest, ...grpc.CallOption) (*SynchronizationSessionCloseSessionOperation, error)
	ReportSessionProgress(context.Context, *idp.ReportSessionProgressRequest, ...grpc.CallOption) (*SynchronizationSessionReportSessionProgressOperation, error)
	Heartbeat(context.Context, *idp.HeartbeatRequest, ...grpc.CallOption) (*SynchronizationSessionHeartbeatOperation, error)
	GetSession(context.Context, *idp.GetSessionRequest, ...grpc.CallOption) (*idp.GetSessionResponse, error)
	ListSessions(context.Context, *idp.ListSessionsRequest, ...grpc.CallOption) (*idp.ListSessionsResponse, error)
}

var _ SynchronizationSessionClient = synchronizationSessionClient{}

type synchronizationSessionClient struct {
	connector transport.Connector
}

// NewSynchronizationSessionClient returns SynchronizationSessionClient implementation.
func NewSynchronizationSessionClient(connector transport.Connector) SynchronizationSessionClient {
	return synchronizationSessionClient{connector}
}

// SynchronizationSessionOpenSessionOperation is used to monitor the state of OpenSession operations.
type SynchronizationSessionOpenSessionOperation struct {
	sdkop.Operation
}

// Metadata retrieves the operation metadata.
func (o *SynchronizationSessionOpenSessionOperation) Metadata() *idp.OpenSessionMetadata {
	return o.Operation.Metadata().(*idp.OpenSessionMetadata)
}

// Response retrieves the operation response.
func (o *SynchronizationSessionOpenSessionOperation) Response() *idp.OpenSessionResponse {
	return o.Operation.Response().(*idp.OpenSessionResponse)
}

// Wait polls the operation until it's done.
func (o *SynchronizationSessionOpenSessionOperation) Wait(ctx context.Context, opts ...grpc.CallOption) (*idp.OpenSessionResponse, error) {
	abstract, err := o.Operation.Wait(ctx, opts...)
	response, _ := abstract.(*idp.OpenSessionResponse)
	return response, err
}

// WaitInterval polls the operation until it's done with custom interval.
func (o *SynchronizationSessionOpenSessionOperation) WaitInterval(ctx context.Context, pollInterval sdkop.PollIntervalFunc, opts ...grpc.CallOption) (*idp.OpenSessionResponse, error) {
	abstract, err := o.Operation.WaitInterval(ctx, pollInterval, opts...)
	response, _ := abstract.(*idp.OpenSessionResponse)
	return response, err
}

// OpenSession is an operation of Yandex.Cloud Idp SynchronizationSession service.
// It returns an object which should be used to monitor the operation state.
func (c synchronizationSessionClient) OpenSession(ctx context.Context, in *idp.OpenSessionRequest, opts ...grpc.CallOption) (*SynchronizationSessionOpenSessionOperation, error) {
	connection, err := c.connector.GetConnection(ctx, SynchronizationSessionOpenSession, opts...)
	if err != nil {
		return nil, err
	}
	pb, err := idp.NewSynchronizationSessionServiceClient(connection).OpenSession(ctx, in, opts...)
	if err != nil {
		return nil, err
	}
	op, err := sdkop.NewOperation(pb, &sdkop.Concretization{
		Poll:         c.pollOperation,
		MetadataType: (*idp.OpenSessionMetadata)(nil),
		ResponseType: (*idp.OpenSessionResponse)(nil),
	})
	if err != nil {
		return nil, err
	}
	return &SynchronizationSessionOpenSessionOperation{*op}, nil
}

// SynchronizationSessionCloseSessionOperation is used to monitor the state of CloseSession operations.
type SynchronizationSessionCloseSessionOperation struct {
	sdkop.Operation
}

// Metadata retrieves the operation metadata.
func (o *SynchronizationSessionCloseSessionOperation) Metadata() *idp.CloseSessionMetadata {
	return o.Operation.Metadata().(*idp.CloseSessionMetadata)
}

// Response retrieves the operation response.
func (o *SynchronizationSessionCloseSessionOperation) Response() *idp.SynchronizationSession {
	return o.Operation.Response().(*idp.SynchronizationSession)
}

// Wait polls the operation until it's done.
func (o *SynchronizationSessionCloseSessionOperation) Wait(ctx context.Context, opts ...grpc.CallOption) (*idp.SynchronizationSession, error) {
	abstract, err := o.Operation.Wait(ctx, opts...)
	response, _ := abstract.(*idp.SynchronizationSession)
	return response, err
}

// WaitInterval polls the operation until it's done with custom interval.
func (o *SynchronizationSessionCloseSessionOperation) WaitInterval(ctx context.Context, pollInterval sdkop.PollIntervalFunc, opts ...grpc.CallOption) (*idp.SynchronizationSession, error) {
	abstract, err := o.Operation.WaitInterval(ctx, pollInterval, opts...)
	response, _ := abstract.(*idp.SynchronizationSession)
	return response, err
}

// CloseSession is an operation of Yandex.Cloud Idp SynchronizationSession service.
// It returns an object which should be used to monitor the operation state.
func (c synchronizationSessionClient) CloseSession(ctx context.Context, in *idp.CloseSessionRequest, opts ...grpc.CallOption) (*SynchronizationSessionCloseSessionOperation, error) {
	connection, err := c.connector.GetConnection(ctx, SynchronizationSessionCloseSession, opts...)
	if err != nil {
		return nil, err
	}
	pb, err := idp.NewSynchronizationSessionServiceClient(connection).CloseSession(ctx, in, opts...)
	if err != nil {
		return nil, err
	}
	op, err := sdkop.NewOperation(pb, &sdkop.Concretization{
		Poll:         c.pollOperation,
		MetadataType: (*idp.CloseSessionMetadata)(nil),
		ResponseType: (*idp.SynchronizationSession)(nil),
	})
	if err != nil {
		return nil, err
	}
	return &SynchronizationSessionCloseSessionOperation{*op}, nil
}

// SynchronizationSessionReportSessionProgressOperation is used to monitor the state of ReportSessionProgress operations.
type SynchronizationSessionReportSessionProgressOperation struct {
	sdkop.Operation
}

// Metadata retrieves the operation metadata.
func (o *SynchronizationSessionReportSessionProgressOperation) Metadata() *idp.ReportSessionProgressMetadata {
	return o.Operation.Metadata().(*idp.ReportSessionProgressMetadata)
}

// Response retrieves the operation response.
func (o *SynchronizationSessionReportSessionProgressOperation) Response() *idp.SynchronizationSession {
	return o.Operation.Response().(*idp.SynchronizationSession)
}

// Wait polls the operation until it's done.
func (o *SynchronizationSessionReportSessionProgressOperation) Wait(ctx context.Context, opts ...grpc.CallOption) (*idp.SynchronizationSession, error) {
	abstract, err := o.Operation.Wait(ctx, opts...)
	response, _ := abstract.(*idp.SynchronizationSession)
	return response, err
}

// WaitInterval polls the operation until it's done with custom interval.
func (o *SynchronizationSessionReportSessionProgressOperation) WaitInterval(ctx context.Context, pollInterval sdkop.PollIntervalFunc, opts ...grpc.CallOption) (*idp.SynchronizationSession, error) {
	abstract, err := o.Operation.WaitInterval(ctx, pollInterval, opts...)
	response, _ := abstract.(*idp.SynchronizationSession)
	return response, err
}

// ReportSessionProgress is an operation of Yandex.Cloud Idp SynchronizationSession service.
// It returns an object which should be used to monitor the operation state.
func (c synchronizationSessionClient) ReportSessionProgress(ctx context.Context, in *idp.ReportSessionProgressRequest, opts ...grpc.CallOption) (*SynchronizationSessionReportSessionProgressOperation, error) {
	connection, err := c.connector.GetConnection(ctx, SynchronizationSessionReportSessionProgress, opts...)
	if err != nil {
		return nil, err
	}
	pb, err := idp.NewSynchronizationSessionServiceClient(connection).ReportSessionProgress(ctx, in, opts...)
	if err != nil {
		return nil, err
	}
	op, err := sdkop.NewOperation(pb, &sdkop.Concretization{
		Poll:         c.pollOperation,
		MetadataType: (*idp.ReportSessionProgressMetadata)(nil),
		ResponseType: (*idp.SynchronizationSession)(nil),
	})
	if err != nil {
		return nil, err
	}
	return &SynchronizationSessionReportSessionProgressOperation{*op}, nil
}

// SynchronizationSessionHeartbeatOperation is used to monitor the state of Heartbeat operations.
type SynchronizationSessionHeartbeatOperation struct {
	sdkop.Operation
}

// Metadata retrieves the operation metadata.
func (o *SynchronizationSessionHeartbeatOperation) Metadata() *idp.HeartbeatMetadata {
	return o.Operation.Metadata().(*idp.HeartbeatMetadata)
}

// Response retrieves the operation response.
func (o *SynchronizationSessionHeartbeatOperation) Response() *emptypb.Empty {
	return o.Operation.Response().(*emptypb.Empty)
}

// Wait polls the operation until it's done.
func (o *SynchronizationSessionHeartbeatOperation) Wait(ctx context.Context, opts ...grpc.CallOption) (*emptypb.Empty, error) {
	abstract, err := o.Operation.Wait(ctx, opts...)
	response, _ := abstract.(*emptypb.Empty)
	return response, err
}

// WaitInterval polls the operation until it's done with custom interval.
func (o *SynchronizationSessionHeartbeatOperation) WaitInterval(ctx context.Context, pollInterval sdkop.PollIntervalFunc, opts ...grpc.CallOption) (*emptypb.Empty, error) {
	abstract, err := o.Operation.WaitInterval(ctx, pollInterval, opts...)
	response, _ := abstract.(*emptypb.Empty)
	return response, err
}

// Heartbeat is an operation of Yandex.Cloud Idp SynchronizationSession service.
// It returns an object which should be used to monitor the operation state.
func (c synchronizationSessionClient) Heartbeat(ctx context.Context, in *idp.HeartbeatRequest, opts ...grpc.CallOption) (*SynchronizationSessionHeartbeatOperation, error) {
	connection, err := c.connector.GetConnection(ctx, SynchronizationSessionHeartbeat, opts...)
	if err != nil {
		return nil, err
	}
	pb, err := idp.NewSynchronizationSessionServiceClient(connection).Heartbeat(ctx, in, opts...)
	if err != nil {
		return nil, err
	}
	op, err := sdkop.NewOperation(pb, &sdkop.Concretization{
		Poll:         c.pollOperation,
		MetadataType: (*idp.HeartbeatMetadata)(nil),
		ResponseType: (*emptypb.Empty)(nil),
	})
	if err != nil {
		return nil, err
	}
	return &SynchronizationSessionHeartbeatOperation{*op}, nil
}

// GetSession is an operation of Yandex.Cloud Idp SynchronizationSession service.
func (c synchronizationSessionClient) GetSession(ctx context.Context, in *idp.GetSessionRequest, opts ...grpc.CallOption) (*idp.GetSessionResponse, error) {
	connection, err := c.connector.GetConnection(ctx, SynchronizationSessionGetSession, opts...)
	if err != nil {
		return nil, err
	}
	return idp.NewSynchronizationSessionServiceClient(connection).GetSession(ctx, in, opts...)
}

// ListSessions is an operation of Yandex.Cloud Idp SynchronizationSession service.
func (c synchronizationSessionClient) ListSessions(ctx context.Context, in *idp.ListSessionsRequest, opts ...grpc.CallOption) (*idp.ListSessionsResponse, error) {
	connection, err := c.connector.GetConnection(ctx, SynchronizationSessionListSessions, opts...)
	if err != nil {
		return nil, err
	}
	return idp.NewSynchronizationSessionServiceClient(connection).ListSessions(ctx, in, opts...)
}

// pollOperation returns the current state of the polled operation.
func (c synchronizationSessionClient) pollOperation(ctx context.Context, operationId string, opts ...grpc.CallOption) (sdkop.YCOperation, error) {
	connection, err := c.connector.GetConnection(ctx, SynchronizationSessionOperationPoller, opts...)
	if err != nil {
		return nil, err
	}
	return operation.NewOperationServiceClient(connection).Get(ctx, &operation.GetOperationRequest{OperationId: operationId}, opts...)
}

var (
	SynchronizationSessionOpenSession           = protoreflect.FullName("yandex.cloud.organizationmanager.v1.idp.SynchronizationSessionService.OpenSession")
	SynchronizationSessionCloseSession          = protoreflect.FullName("yandex.cloud.organizationmanager.v1.idp.SynchronizationSessionService.CloseSession")
	SynchronizationSessionReportSessionProgress = protoreflect.FullName("yandex.cloud.organizationmanager.v1.idp.SynchronizationSessionService.ReportSessionProgress")
	SynchronizationSessionHeartbeat             = protoreflect.FullName("yandex.cloud.organizationmanager.v1.idp.SynchronizationSessionService.Heartbeat")
	SynchronizationSessionGetSession            = protoreflect.FullName("yandex.cloud.organizationmanager.v1.idp.SynchronizationSessionService.GetSession")
	SynchronizationSessionListSessions          = protoreflect.FullName("yandex.cloud.organizationmanager.v1.idp.SynchronizationSessionService.ListSessions")
	SynchronizationSessionOperationPoller       = protoreflect.FullName("yandex.cloud.operation.OperationService.Get")
)
