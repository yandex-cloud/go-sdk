// Code generated by sdkgen-v2. DO NOT EDIT.
package containerregistrysdk

import (
	"context"

	containerregistry "github.com/yandex-cloud/go-genproto/yandex/cloud/containerregistry/v1"
	"github.com/yandex-cloud/go-sdk/v2/pkg/iterator"
	"google.golang.org/grpc"
)

type LifecyclePolicyClientIterator interface {
	Iterator(context.Context, *containerregistry.ListLifecyclePoliciesRequest, ...grpc.CallOption) *iterator.Iterator[*containerregistry.ListLifecyclePoliciesRequest, *containerregistry.LifecyclePolicy]
	DryRunResultsIterator(context.Context, *containerregistry.ListDryRunLifecyclePolicyResultsRequest, ...grpc.CallOption) *iterator.Iterator[*containerregistry.ListDryRunLifecyclePolicyResultsRequest, *containerregistry.DryRunLifecyclePolicyResult]
	DryRunResultAffectedImagesIterator(context.Context, *containerregistry.ListDryRunLifecyclePolicyResultAffectedImagesRequest, ...grpc.CallOption) *iterator.Iterator[*containerregistry.ListDryRunLifecyclePolicyResultAffectedImagesRequest, *containerregistry.Image]
}

type lifecyclePolicyServiceListInternal struct {
	*containerregistry.ListLifecyclePoliciesResponse
}

func (r lifecyclePolicyServiceListInternal) Items() []*containerregistry.LifecyclePolicy {
	return r.ListLifecyclePoliciesResponse.LifecyclePolicies
}

func (c lifecyclePolicyClient) Iterator(ctx context.Context, req *containerregistry.ListLifecyclePoliciesRequest, opts ...grpc.CallOption) *iterator.Iterator[*containerregistry.ListLifecyclePoliciesRequest, *containerregistry.LifecyclePolicy] {
	return iterator.NewIterator[*containerregistry.ListLifecyclePoliciesRequest, *containerregistry.LifecyclePolicy](ctx, req,
		func(ctx context.Context, req *containerregistry.ListLifecyclePoliciesRequest, opts ...grpc.CallOption) (iterator.PageResponse[*containerregistry.LifecyclePolicy], error) {
			resp, err := c.List(ctx, req, opts...)
			if err != nil {
				return nil, err
			}
			return lifecyclePolicyServiceListInternal{resp}, nil
		})
}

type lifecyclePolicyServiceListDryRunResultsInternal struct {
	*containerregistry.ListDryRunLifecyclePolicyResultsResponse
}

func (r lifecyclePolicyServiceListDryRunResultsInternal) Items() []*containerregistry.DryRunLifecyclePolicyResult {
	return r.ListDryRunLifecyclePolicyResultsResponse.DryRunLifecyclePolicyResults
}

func (c lifecyclePolicyClient) DryRunResultsIterator(ctx context.Context, req *containerregistry.ListDryRunLifecyclePolicyResultsRequest, opts ...grpc.CallOption) *iterator.Iterator[*containerregistry.ListDryRunLifecyclePolicyResultsRequest, *containerregistry.DryRunLifecyclePolicyResult] {
	return iterator.NewIterator[*containerregistry.ListDryRunLifecyclePolicyResultsRequest, *containerregistry.DryRunLifecyclePolicyResult](ctx, req,
		func(ctx context.Context, req *containerregistry.ListDryRunLifecyclePolicyResultsRequest, opts ...grpc.CallOption) (iterator.PageResponse[*containerregistry.DryRunLifecyclePolicyResult], error) {
			resp, err := c.ListDryRunResults(ctx, req, opts...)
			if err != nil {
				return nil, err
			}
			return lifecyclePolicyServiceListDryRunResultsInternal{resp}, nil
		})
}

type lifecyclePolicyServiceListDryRunResultAffectedImagesInternal struct {
	*containerregistry.ListDryRunLifecyclePolicyResultAffectedImagesResponse
}

func (r lifecyclePolicyServiceListDryRunResultAffectedImagesInternal) Items() []*containerregistry.Image {
	return r.ListDryRunLifecyclePolicyResultAffectedImagesResponse.AffectedImages
}

func (c lifecyclePolicyClient) DryRunResultAffectedImagesIterator(ctx context.Context, req *containerregistry.ListDryRunLifecyclePolicyResultAffectedImagesRequest, opts ...grpc.CallOption) *iterator.Iterator[*containerregistry.ListDryRunLifecyclePolicyResultAffectedImagesRequest, *containerregistry.Image] {
	return iterator.NewIterator[*containerregistry.ListDryRunLifecyclePolicyResultAffectedImagesRequest, *containerregistry.Image](ctx, req,
		func(ctx context.Context, req *containerregistry.ListDryRunLifecyclePolicyResultAffectedImagesRequest, opts ...grpc.CallOption) (iterator.PageResponse[*containerregistry.Image], error) {
			resp, err := c.ListDryRunResultAffectedImages(ctx, req, opts...)
			if err != nil {
				return nil, err
			}
			return lifecyclePolicyServiceListDryRunResultAffectedImagesInternal{resp}, nil
		})
}
