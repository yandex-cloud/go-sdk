// Code generated by sdkgen-v2. DO NOT EDIT.
package marketplacesdk

import (
	"context"

	marketplace "github.com/yandex-cloud/go-genproto/yandex/cloud/k8s/marketplace/v1"
	"github.com/yandex-cloud/go-sdk/v2/pkg/iterator"
	"google.golang.org/grpc"
)

type HelmReleaseClientIterator interface {
	Iterator(context.Context, *marketplace.ListHelmReleasesRequest, ...grpc.CallOption) *iterator.Iterator[*marketplace.ListHelmReleasesRequest, *marketplace.HelmRelease]
}

type helmReleaseServiceListInternal struct {
	*marketplace.ListHelmReleasesResponse
}

func (r helmReleaseServiceListInternal) Items() []*marketplace.HelmRelease {
	return r.ListHelmReleasesResponse.HelmReleases
}

func (c helmReleaseClient) Iterator(ctx context.Context, req *marketplace.ListHelmReleasesRequest, opts ...grpc.CallOption) *iterator.Iterator[*marketplace.ListHelmReleasesRequest, *marketplace.HelmRelease] {
	return iterator.NewIterator[*marketplace.ListHelmReleasesRequest, *marketplace.HelmRelease](ctx, req,
		func(ctx context.Context, req *marketplace.ListHelmReleasesRequest, opts ...grpc.CallOption) (iterator.PageResponse[*marketplace.HelmRelease], error) {
			resp, err := c.List(ctx, req, opts...)
			if err != nil {
				return nil, err
			}
			return helmReleaseServiceListInternal{resp}, nil
		})
}
