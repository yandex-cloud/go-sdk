// Code generated by sdkgen-v2. DO NOT EDIT.
package functionssdk

import (
	"context"

	functions "github.com/yandex-cloud/go-genproto/yandex/cloud/serverless/functions/v1"
	"github.com/yandex-cloud/go-sdk/v2/pkg/iterator"
	"google.golang.org/grpc"
)

type NetworkClientIterator interface {
	UsedIterator(context.Context, *functions.ListUsedNetworksRequest, ...grpc.CallOption) *iterator.Iterator[*functions.ListUsedNetworksRequest, *functions.UsedNetwork]
	ConnectedResourcesIterator(context.Context, *functions.ListConnectedResourcesRequest, ...grpc.CallOption) *iterator.Iterator[*functions.ListConnectedResourcesRequest, *functions.ListConnectedResourcesResponse_ConnectedResource]
}

type networkServiceListUsedInternal struct {
	*functions.ListUsedNetworksResponse
}

func (r networkServiceListUsedInternal) Items() []*functions.UsedNetwork {
	return r.ListUsedNetworksResponse.Networks
}

func (c networkClient) UsedIterator(ctx context.Context, req *functions.ListUsedNetworksRequest, opts ...grpc.CallOption) *iterator.Iterator[*functions.ListUsedNetworksRequest, *functions.UsedNetwork] {
	return iterator.NewIterator[*functions.ListUsedNetworksRequest, *functions.UsedNetwork](ctx, req,
		func(ctx context.Context, req *functions.ListUsedNetworksRequest, opts ...grpc.CallOption) (iterator.PageResponse[*functions.UsedNetwork], error) {
			resp, err := c.ListUsed(ctx, req, opts...)
			if err != nil {
				return nil, err
			}
			return networkServiceListUsedInternal{resp}, nil
		})
}

type networkServiceListConnectedResourcesInternal struct {
	*functions.ListConnectedResourcesResponse
}

func (r networkServiceListConnectedResourcesInternal) Items() []*functions.ListConnectedResourcesResponse_ConnectedResource {
	return r.ListConnectedResourcesResponse.Resources
}

func (c networkClient) ConnectedResourcesIterator(ctx context.Context, req *functions.ListConnectedResourcesRequest, opts ...grpc.CallOption) *iterator.Iterator[*functions.ListConnectedResourcesRequest, *functions.ListConnectedResourcesResponse_ConnectedResource] {
	return iterator.NewIterator[*functions.ListConnectedResourcesRequest, *functions.ListConnectedResourcesResponse_ConnectedResource](ctx, req,
		func(ctx context.Context, req *functions.ListConnectedResourcesRequest, opts ...grpc.CallOption) (iterator.PageResponse[*functions.ListConnectedResourcesResponse_ConnectedResource], error) {
			resp, err := c.ListConnectedResources(ctx, req, opts...)
			if err != nil {
				return nil, err
			}
			return networkServiceListConnectedResourcesInternal{resp}, nil
		})
}
