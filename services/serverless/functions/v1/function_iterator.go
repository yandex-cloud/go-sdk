// Code generated by sdkgen-v2. DO NOT EDIT.
package functionssdk

import (
	"context"

	access "github.com/yandex-cloud/go-genproto/yandex/cloud/access"
	operation "github.com/yandex-cloud/go-genproto/yandex/cloud/operation"
	functions "github.com/yandex-cloud/go-genproto/yandex/cloud/serverless/functions/v1"
	"github.com/yandex-cloud/go-sdk/v2/pkg/iterator"
	"google.golang.org/grpc"
)

type FunctionClientIterator interface {
	Iterator(context.Context, *functions.ListFunctionsRequest, ...grpc.CallOption) *iterator.Iterator[*functions.ListFunctionsRequest, *functions.Function]
	VersionsIterator(context.Context, *functions.ListFunctionsVersionsRequest, ...grpc.CallOption) *iterator.Iterator[*functions.ListFunctionsVersionsRequest, *functions.Version]
	TagHistoryIterator(context.Context, *functions.ListFunctionTagHistoryRequest, ...grpc.CallOption) *iterator.Iterator[*functions.ListFunctionTagHistoryRequest, *functions.ListFunctionTagHistoryResponse_FunctionTagHistoryRecord]
	OperationsIterator(context.Context, *functions.ListFunctionOperationsRequest, ...grpc.CallOption) *iterator.Iterator[*functions.ListFunctionOperationsRequest, *operation.Operation]
	AccessBindingsIterator(context.Context, *access.ListAccessBindingsRequest, ...grpc.CallOption) *iterator.Iterator[*access.ListAccessBindingsRequest, *access.AccessBinding]
	ScalingPoliciesIterator(context.Context, *functions.ListScalingPoliciesRequest, ...grpc.CallOption) *iterator.Iterator[*functions.ListScalingPoliciesRequest, *functions.ScalingPolicy]
}

type functionServiceListInternal struct {
	*functions.ListFunctionsResponse
}

func (r functionServiceListInternal) Items() []*functions.Function {
	return r.ListFunctionsResponse.Functions
}

func (c functionClient) Iterator(ctx context.Context, req *functions.ListFunctionsRequest, opts ...grpc.CallOption) *iterator.Iterator[*functions.ListFunctionsRequest, *functions.Function] {
	return iterator.NewIterator[*functions.ListFunctionsRequest, *functions.Function](ctx, req,
		func(ctx context.Context, req *functions.ListFunctionsRequest, opts ...grpc.CallOption) (iterator.PageResponse[*functions.Function], error) {
			resp, err := c.List(ctx, req, opts...)
			if err != nil {
				return nil, err
			}
			return functionServiceListInternal{resp}, nil
		})
}

type functionServiceListVersionsInternal struct {
	*functions.ListFunctionsVersionsResponse
}

func (r functionServiceListVersionsInternal) Items() []*functions.Version {
	return r.ListFunctionsVersionsResponse.Versions
}

func (c functionClient) VersionsIterator(ctx context.Context, req *functions.ListFunctionsVersionsRequest, opts ...grpc.CallOption) *iterator.Iterator[*functions.ListFunctionsVersionsRequest, *functions.Version] {
	return iterator.NewIterator[*functions.ListFunctionsVersionsRequest, *functions.Version](ctx, req,
		func(ctx context.Context, req *functions.ListFunctionsVersionsRequest, opts ...grpc.CallOption) (iterator.PageResponse[*functions.Version], error) {
			resp, err := c.ListVersions(ctx, req, opts...)
			if err != nil {
				return nil, err
			}
			return functionServiceListVersionsInternal{resp}, nil
		})
}

type functionServiceListTagHistoryInternal struct {
	*functions.ListFunctionTagHistoryResponse
}

func (r functionServiceListTagHistoryInternal) Items() []*functions.ListFunctionTagHistoryResponse_FunctionTagHistoryRecord {
	return r.ListFunctionTagHistoryResponse.FunctionTagHistoryRecord
}

func (c functionClient) TagHistoryIterator(ctx context.Context, req *functions.ListFunctionTagHistoryRequest, opts ...grpc.CallOption) *iterator.Iterator[*functions.ListFunctionTagHistoryRequest, *functions.ListFunctionTagHistoryResponse_FunctionTagHistoryRecord] {
	return iterator.NewIterator[*functions.ListFunctionTagHistoryRequest, *functions.ListFunctionTagHistoryResponse_FunctionTagHistoryRecord](ctx, req,
		func(ctx context.Context, req *functions.ListFunctionTagHistoryRequest, opts ...grpc.CallOption) (iterator.PageResponse[*functions.ListFunctionTagHistoryResponse_FunctionTagHistoryRecord], error) {
			resp, err := c.ListTagHistory(ctx, req, opts...)
			if err != nil {
				return nil, err
			}
			return functionServiceListTagHistoryInternal{resp}, nil
		})
}

type functionServiceListOperationsInternal struct {
	*functions.ListFunctionOperationsResponse
}

func (r functionServiceListOperationsInternal) Items() []*operation.Operation {
	return r.ListFunctionOperationsResponse.Operations
}

func (c functionClient) OperationsIterator(ctx context.Context, req *functions.ListFunctionOperationsRequest, opts ...grpc.CallOption) *iterator.Iterator[*functions.ListFunctionOperationsRequest, *operation.Operation] {
	return iterator.NewIterator[*functions.ListFunctionOperationsRequest, *operation.Operation](ctx, req,
		func(ctx context.Context, req *functions.ListFunctionOperationsRequest, opts ...grpc.CallOption) (iterator.PageResponse[*operation.Operation], error) {
			resp, err := c.ListOperations(ctx, req, opts...)
			if err != nil {
				return nil, err
			}
			return functionServiceListOperationsInternal{resp}, nil
		})
}

type functionServiceListAccessBindingsInternal struct {
	*access.ListAccessBindingsResponse
}

func (r functionServiceListAccessBindingsInternal) Items() []*access.AccessBinding {
	return r.ListAccessBindingsResponse.AccessBindings
}

func (c functionClient) AccessBindingsIterator(ctx context.Context, req *access.ListAccessBindingsRequest, opts ...grpc.CallOption) *iterator.Iterator[*access.ListAccessBindingsRequest, *access.AccessBinding] {
	return iterator.NewIterator[*access.ListAccessBindingsRequest, *access.AccessBinding](ctx, req,
		func(ctx context.Context, req *access.ListAccessBindingsRequest, opts ...grpc.CallOption) (iterator.PageResponse[*access.AccessBinding], error) {
			resp, err := c.ListAccessBindings(ctx, req, opts...)
			if err != nil {
				return nil, err
			}
			return functionServiceListAccessBindingsInternal{resp}, nil
		})
}

type functionServiceListScalingPoliciesInternal struct {
	*functions.ListScalingPoliciesResponse
}

func (r functionServiceListScalingPoliciesInternal) Items() []*functions.ScalingPolicy {
	return r.ListScalingPoliciesResponse.ScalingPolicies
}

func (c functionClient) ScalingPoliciesIterator(ctx context.Context, req *functions.ListScalingPoliciesRequest, opts ...grpc.CallOption) *iterator.Iterator[*functions.ListScalingPoliciesRequest, *functions.ScalingPolicy] {
	return iterator.NewIterator[*functions.ListScalingPoliciesRequest, *functions.ScalingPolicy](ctx, req,
		func(ctx context.Context, req *functions.ListScalingPoliciesRequest, opts ...grpc.CallOption) (iterator.PageResponse[*functions.ScalingPolicy], error) {
			resp, err := c.ListScalingPolicies(ctx, req, opts...)
			if err != nil {
				return nil, err
			}
			return functionServiceListScalingPoliciesInternal{resp}, nil
		})
}
